# Development Profile Configuration
# Uses PostgreSQL Docker container and mocked external services
# Use with: ./mvnw spring-boot:run -Dspring.profiles.active=dev
spring.config.import=optional:file:.env[.properties]

# Application name
spring.application.name=careconnect-backend-dev

# Disable banner for faster startup
spring.main.banner-mode=off

# Disable AWS database configuration in development
careconnect.database.use-aws-config=false
careconnect.aws.enabled=false

# Disable external API services in development (keep Stripe enabled for invoice features)
careconnect.stripe.enabled=false
careconnect.openai.enabled=false
careconnect.deepseek.enabled=false
careconnect.openrouter.enabled=true

# Database Configuration - PostgreSQL Docker
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.url=${JDBC_URI:jdbc:postgresql://localhost:5432/careconnect}
spring.datasource.username=${DB_USER:postgres}
spring.datasource.password=${DB_PASSWORD:changeme}
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# Use JPA (enable JPA DDL auto)
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.defer-datasource-initialization=true
spring.sql.init.mode=never

# Flyway configuration for development
spring.flyway.enabled=false
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=false
spring.flyway.validate-on-migrate=false
spring.flyway.out-of-order=true
spring.flyway.ignore-migration-patterns=false

# Development logging
logging.level.root=INFO
logging.level.com.careconnect=DEBUG
logging.level.org.springframework.security=DEBUG
logging.pattern.console=%d{HH:mm:ss} %-5level %logger{0} - %msg%n

# Fast connection pool
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.connection-timeout=10000

# Email Configuration - Console logging (no real emails sent)
careconnect.email.provider=console
careconnect.email.from=dev@careconnect.local

# File Storage - Local only (no S3)
app.file.storage.use-s3=false
app.file.storage.default=database
careconnect.upload.dir=./uploads

# Development URLs
frontend.base-url=http://localhost:3000
careconnect.baseurl=http://localhost:8080
careconnect.cors_allowed=${CORS_ALLOWED_LIST:http://localhost:*,https://isabel-santiagolewis.github.io}

# JWT Configuration - Development secret (do not use in production)
security.jwt.secret=Ubtl5F9nYshQnfuSw8yyhr0cBNAS8cSvY8ewfL5GApn4ixh0LhG5beGa8qbAxvvQaJmAaA/Tcv2Xa58
jwt.expiration.ms=10800000

# Mock API Keys and Services (these won't actually connect to external services)
# Deepseek enabbled for AI Chat Feature Testing
stripe.secret-key=${STRIPE_SECRET_KEY:}
stripe.webhook-secret=whsec_mock_webhook_secret
openai.api-key=mock_openai_key



# Spring AI Configuration

spring.ai.openai.api-key=${DEEPSEEK_API_KEY}
spring.ai.openai.base-url=https://api.deepseek.com
spring.ai.openai.chat.options.model=deepseek-chat
#spring.ai.openai.api-key=${OPENAI_API_KEY}
#spring.ai.openai.base-url=https://api.openai.com
#spring.ai.openai.chat.options.model=gpt-5
#spring.ai.openai.chat.options.temperature=0.2
#spring.ai.openai.chat.options.max-tokens=2000
spring.ai.vertex.ai.gemini.enabled=false
spring.autoconfigure.exclude=org.springframework.ai.autoconfigure.vertexai.gemini.VertexAiGeminiAutoConfiguration
# Logging for Spring AI
logging.level.org.springframework.ai=DEBUG
logging.level.org.springframework.web.client=DEBUG

# OAuth Configuration - Mock values (OAuth won't work in dev mode)
spring.security.oauth2.client.registration.google.client-id=mock_google_client_id
spring.security.oauth2.client.registration.google.client-secret=mock_google_client_secret
spring.security.oauth2.client.registration.fitbit.client-id=mock_fitbit_client_id
spring.security.oauth2.client.registration.fitbit.client-secret=mock_fitbit_client_secret

# Firebase Configuration - Mock values (push notifications won't work)
firebase.project-id=mock_firebase_project
firebase.sender-id=mock_sender_id

# AWS Configuration - Mock values (S3 won't work, but local file storage will)
aws.s3.access-key=${AWS_ACCESS_KEY_ID}
aws.s3.secret-key=${AWS_SECRET_ACCESS_KEY}
aws.s3.bucket=${S3_BUCKET_NAME} 
aws.s3.region=us-east-1
#aws.s3.base-url=http://localhost:8080/mock-s3

aws.s3.bucket-name=cc-iac-us-east-1-650566638526
aws.region=us-east-1
spring.servlet.multipart.max-file-size= 25MB
spring.servlet.multipart.max-request-size= 30MB

# Email Service Configuration - All mocked for development
careconnect.email.sendgrid.api-key=mock_sendgrid_key
careconnect.email.resend.api-key=mock_resend_key
careconnect.email.mailgun.api-key=mock_mailgun_key
careconnect.email.mailgun.domain=mock.domain.com

# Mail settings - disabled in dev
spring.mail.host=email-smtp.us-west-2.amazonaws.com
spring.mail.port=25
spring.mail.username=username
spring.mail.password=password

# Subscription Configuration - Mock Stripe price IDs
subscription.premium-price-ids=price_mock_premium
subscription.standard-price-ids=price_mock_standard

# AI Service Configuration
ai.model.provider=deepseek
openai.model.name=gpt-3.5-turbo-mock
deepseek.api.key=${DEEPSEEK_API_KEY:}
deepseek.api.url=https://api.deepseek.com/v1

# deprecate above in favor of below to make it generic
careconnect.ai.enabled=false
#support provider supporting open ai specification (deepseek, Vercel,Gemini,chat-gpt)
careconnect.ai.provider=deepseek
careconnect.ai.api.url=https://api.deepseek.com/v1
careconnect.ai.api.key=${DEEPSEEK_API_KEY:}
careconnect.ai.model.name=deepseek-chat
careconnect.ai.model.temperature=1.0


openrouter.api.key=${DEEPSEEK_OPENROUTER_API_KEY}
openrouter.api.url=https://openrouter.ai/api/v1

# Development specific optimizations
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.types.json.use_jdbc_json=true
management.endpoints.web.exposure.include=health,info,metrics

# WebSocket Configuration - Auto-detect AWS or Local
# If AWS_WEBSOCKET_API_ENDPOINT env var is set, AwsWebSocketService loads and uses AWS
# Otherwise, WebSocketConfig loads and uses local Spring WebSocket
careconnect.websocket.enabled=true
careconnect.websocket.endpoint=/ws/careconnect
careconnect.websocket.allowed-origins=http://localhost:*,https://*.careconnect.com
careconnect.websocket.connection-ttl-minutes=30

# AWS WebSocket Configuration (only used when AWS_WEBSOCKET_API_ENDPOINT is set)
# Set AWS_WEBSOCKET_API_ENDPOINT=https://xxxxx.execute-api.us-east-1.amazonaws.com/dev
careconnect.websocket.aws.api-gateway-endpoint=${AWS_WEBSOCKET_API_ENDPOINT:}
careconnect.websocket.aws.region=${AWS_REGION:us-east-1}

# === GOOGLE OAUTH === Add your credentials in the .env file or set environment variables
google.oauth.client-id=${GOOGLE_CLIENT_ID:mock_client_id}
google.oauth.client-secret=${GOOGLE_CLIENT_SECRET:mock_api_secret}
google.oauth.redirect-uri=${GOOGLE_REDIRECT_URI:http://localhost:8080/oauth/google/callback}
google.oauth.scope=${GOOGLE_SCOPE:https://www.googleapis.com/auth/gmail.readonly}
google.oauth.frontend-url=${GOOGLE_OAUTH_FRONTEND_URL:http://localhost:65241}

email.crypto.secret=${EMAIL_CRYPTO_SECRET:careconnect-dev-secret-32-bytes!!}

# === MICROSOFT OAUTH === Add your credentials in the .env file or set environment variables
#microsoft.oauth.client-id=${MS_CLIENT_ID}
#microsoft.oauth.client-secret=${MS_CLIENT_SECRET}
#microsoft.oauth.redirect-uri=http://localhost:8080/oauth/microsoft/callback
#microsoft.oauth.scope=https://graph.microsoft.com/Mail.Read offline_access

# === ALEXA OAUTH === Mock values for development
alexa.oauth.client-id=${ALEXA_CLIENT_ID:mock_alexa_client_id}
alexa.oauth.client-secret=${ALEXA_CLIENT_SECRET:mock_alexa_client_secret}
